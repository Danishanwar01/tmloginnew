<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Telegram Login</title>
</head>
<body>

<h2>Login with Telegram</h2>

<script async src="https://telegram.org/js/telegram-widget.js?15"
  data-telegram-login="africacryptologinbot"
  data-size="large"
  data-userpic="true"
  data-request-access="write"
  data-onauth="onTelegramAuth">
</script>

<script>
  function onTelegramAuth(user) {
    console.log("Telegram User:", user);

    fetch("/api/telegram-login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(user)
    })
    .then(res => res.json())
    .then(data => {
      console.log(data);
      alert("Login successful ✅");
    })
    .catch(err => {
      console.error(err);
      alert("Login failed ❌");
    });
  }
</script>

</body>
</html>
